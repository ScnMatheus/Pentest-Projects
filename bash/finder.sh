#!/bin/bash
if [ "$1" == "" ]
then
	echo  -e "\n=================================="
	echo -e "\nURLFINDER -- DESEC SECURITY"
	echo -e "\nexemplo de uso: $0 dominioespecifico.com.br"
	echo -e "\n===================================="
else
	echo -e "\n===================================="
	echo -e "\n [+] Resolvendo URLS em: $1"
	echo -e "\n===================================="
	echo -e "\n===================================="
	wget -q "$1"
	echo -e "\n [+] Concluido: salvando os resultados em: $1.ip.txt"
	cat index.html | egrep "href" | cut -d "/" -f 3 | grep "\." | cut -d '"' -f 1 | grep -v "<" | grep -v "li" >> $1.ip.txt
	linhas=$(cat businesscorp.com.br.ip.txt | wc -l)
	echo "$linhas totais no arquivo"
	for linhas in $(seq  $linhas); do
		ip=$(cat $1.ip.txt | sed -n "$linhas"p)
		dominio=$(host $ip | grep "has address" | sort | sort -u | awk '{print $2}')
		echo "$ip -> $dominio" >> $1.ip.txt
		sort -n $1.ip.txt | uniq > $1.ip.txt.sorted
		done
fi
