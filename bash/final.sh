#!/bin/bash
if [ "$1" == "" ]
then
        echo  -e "\n=================================="
        echo -e "\nURLFINDER -- DESEC SECURITY"
        echo -e "\nexemplo de uso: $0 dominioespecifico.com.br"
        echo -e "\n===================================="
else
        echo -e "\n===================================="
        echo -e "\n [+] Resolvendo URLS em: $1"
        echo -e "\n===================================="
        echo -e "\n===================================="
        wget -q "$1"
        echo -e "\n [+] Concluido: salvando os resultados em: $1.ip.txt"
        cat index.html | egrep "href" | cut -d "/" -f 3 | grep "\." | cut -d '"' -f 1 | grep -v "<" | grep -v "li" >> $1.ip.txt
        linhas=$(cat $1.ip.txt | wc -l)
        echo "$linhas totais no arquivo"
        for linhas in $(seq  $linhas); do
                ip=$(cat $1.ip.txt | sed -n "$linhas"p)
                dominio=$(host $ip | grep "has address" | awk '{print $4}')
                echo "$ip -> $dominio" >> $1.ip.txt.temp
                done
        sort -u $1.ip.txt.temp > $1.ip.txt.sorted
        rm $1.ip.txt.temp
fi
